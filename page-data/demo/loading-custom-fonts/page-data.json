{"componentChunkName":"component---src-templates-demo-jsx","path":"/demo/loading-custom-fonts","result":{"data":{"demoPage":{"html":"<div\n  class=\"codepen-later\"\n  data-editable=\"true\"\n  data-height=\"500\"\n  data-default-tab=\"result\"\n  data-prefill='{\n    \"scripts\": [\"https://unpkg.com/fabric@4.0.0-beta.12/dist/fabric.js\", \"http://rawgit.com/bramstein/fontfaceobserver/master/fontfaceobserver.js\"]\n  }'\n>\n<pre data-lang=\"css\" data-options-autoprefixer=\"true\">\n.controls {\n\tdisplay: inline-block;\n}\ncanvas {\n  border: 1px solid #999;\n}\n</pre>\n<pre data-lang=\"html\">\n  <canvas id=\"c\" width=\"500\" height=\"500\" style=\"border:1px solid #ccc\"></canvas>\n  <div class=\"controls\">\n    <p>\n      Font-family: <select id=\"font-family\"></select>\n    </p>\n  </div>\n</pre>\n<pre data-lang=\"js\">\n/*\nWhen working with custom fonts on a fabric canvas, it is recommended to\nuse a font preloader. Not doing so is likely to cause texts that are\nimported onto the canvas to be rendered with a wrong (default) font. It\ncan also cause you to see a FOUT (Flash of Unstyled Text) right after\nchanging the font of a text. The reason behind this is that the browser\nwill only load a font after it is used in the DOM. Preloading fonts\nprevents this from happening. In this example we are using Font Face\nObserver (https://github.com/bramstein/fontfaceobserver) to preload\nGoogle Fonts, using the following steps:\n- Add the custom fonts using @import in your CSS\n- Make an array containing the names of all the custom fonts\n- Load all the custom fonts using a promise or load them by request\n- When the promise is fulfilled, initialize the fabric canvas\n*/\n<p>var canvas = new fabric.Canvas('c');\n// Define an array with all fonts\nvar fonts = [\"Pacifico\", \"VT323\", \"Quicksand\", \"Inconsolata\"];</p>\n<p>var textbox = new fabric.Textbox('Lorum ipsum dolor sit amet', {\nleft: 50,\ntop: 50,\nwidth: 150,\nfontSize: 20\n});\ncanvas.add(textbox).setActiveObject(textbox);\nfonts.unshift('Times New Roman');\n// Populate the fontFamily select\nvar select = document.getElementById(\"font-family\");\nfonts.forEach(function(font) {\nvar option = document.createElement('option');\noption.innerHTML = font;\noption.value = font;\nselect.appendChild(option);\n});</p>\n<p>// Apply selected font on change\ndocument.getElementById('font-family').onchange = function() {\nif (this.value !== 'Times New Roman') {\nloadAndUse(this.value);\n} else {\ncanvas.getActiveObject().set(\"fontFamily\", this.value);\ncanvas.requestRenderAll();\n}\n};</p>\n<p>function loadAndUse(font) {\nvar myfont = new FontFaceObserver(font)\nmyfont.load()\n.then(function() {\n// when font is loaded, use it.\ncanvas.getActiveObject().set(\"fontFamily\", font);\ncanvas.requestRenderAll();\n}).catch(function(e) {\nconsole.log(e)\nalert('font loading failed ' + font);\n});\n}</p>\n<p>// Load all fonts using Font Face Observer</p>\n</pre>\n</div>","frontmatter":{"title":"Loading custom font"},"mdFile":{"__typename":"File","relativePath":"demo/loading-custom-fonts/index.md"}}},"pageContext":{"slug":"/demo/loading-custom-fonts","prev":{"title":"Intersection","slug":"/demo/intersection"},"next":{"title":"Manage selection","slug":"/demo/manage-selection"}}},"staticQueryHashes":["2748212769"]}